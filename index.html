<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Montreal Bike Accident Hotspots</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap & Leaflet CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="style.css">

  <style>
    /* Reduce map height */
    #map { height: 480px; border-radius: 12px; }

    /* Compute result styling to match tab title */
    #resultText {
      color: #2f5d50;
      font-weight: 600;
      font-size: 1.1rem;
      margin-top: 0.5rem;
    }

    .results-bar { 
      font-size: 14px; 
      line-height:1.4; 
      padding:8px; 
      background: rgba(255,255,255,0.95); 
      border-radius:8px; 
      box-shadow: 0 2px 6px rgba(0,0,0,0.18); 
    }

    /* tighter filter UI */
    .filters { 
      min-width: 180px; 
      font-size: 13px; 
      padding: 4px 6px !important;
      line-height: 1.1 !important;
    }
    .filters label { 
      margin-bottom: 2px !important; 
    }

    /* Tab styling */
    .nav-tabs .nav-link.active {
      background-color: #eaf3ec;
      border-color: #d5e1db #d5e1db #eaf3ec;
      color: #2f5d50;
      font-weight: 600;
    }

    /* Bike lane legend bottom-left */
    .bike-legend {
      position: absolute;
      bottom: 10px;
      left: 10px;
      background: rgba(255,255,255,0.9);
      padding: 6px 10px;
      border-radius: 6px;
      font-size: 14px;
      color: #003366;
      font-weight: 600;
      box-shadow: 0 1px 4px rgba(0,0,0,0.3);
      z-index: 500;
    }
  </style>
</head>

<body>

  <!-- Header -->
  <header class="py-5 text-center bg-light-green shadow-sm">
    <div class="container">
      <h1 class="display-5 fw-bold text-forest">Bike Accident Hotspots MVP</h1>
      <p class="lead text-secondary mt-3">
        Exploring Montrealâ€™s cycling safety through open data and spatial visualization.
      </p>
    </div>
  </header>

  <!-- =========================== -->
  <!--        TABS (MAP/ABOUT)     -->
  <!-- =========================== -->
  <div class="container mt-4">

    <ul class="nav nav-tabs" id="mainTabs" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="map-tab" data-bs-toggle="tab" data-bs-target="#mapPanel" type="button" role="tab">Map</button>
      </li>

      <li class="nav-item" role="presentation">
        <button class="nav-link" id="about-tab" data-bs-toggle="tab" data-bs-target="#aboutPanel" type="button" role="tab">About</button>
      </li>
    </ul>

    <div class="tab-content">

      <!-- MAP TAB -->
      <div class="tab-pane fade show active" id="mapPanel" role="tabpanel">

        <main class="my-4">
          <div id="map" class="rounded-4 shadow-sm"></div>
          <!-- Compute button below the map -->
          <div class="info-card p-3 rounded-4 shadow-sm bg-white mt-3 d-inline-block">
            <button id="computeBtn" class="btn btn-success btn-sm">Compute</button>
            <div id="resultText"></div>
          </div>
        </main>

        <!-- Bike lane legend -->
        <div class="bike-legend">Bike lanes</div>
      </div>

      <!-- ABOUT TAB -->
      <div class="tab-pane fade" id="aboutPanel" role="tabpanel">
        <section class="my-4">
          <div class="info-card p-4 rounded-4 shadow-sm bg-white">
            <h2 class="h5 text-forest mb-3">About this project</h2>
            <p>
              This map visualizes reported bike accidents and cycling infrastructure in Montreal. It analyses open data from the City of Montreal. Each point represents a collision event, color-coded by severity. Users are able to compute relationships between accidents and bike lanes based on selected filters.
            </p>
          </div>
        </section>
      </div>

    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>
  <script src="app_updated.js"></script>

</body>
</html>
