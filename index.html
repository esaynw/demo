<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Montreal Bike Accident Hotspots</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap & Leaflet CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="style.css">

  <style>
    /* Reduce map height */
    #map { height: 480px; border-radius: 12px; }

    /* Compute result styling to match tab title */
    #resultText {
      color: #2f5d50;
      font-weight: 600;
      font-size: 1.1rem;
      margin-top: 0.5rem;
    }

    .results-bar { 
      font-size: 14px; 
      line-height:1.4; 
      padding:8px; 
      background: rgba(255,255,255,0.95); 
      border-radius:8px; 
      box-shadow: 0 2px 6px rgba(0,0,0,0.18); 
    }

    /* tighter filter UI */
    .filters { 
      min-width: 180px; 
      font-size: 13px; 
      padding: 4px 6px !important;
      line-height: 1.1 !important;
    }
    .filters label { 
      margin-bottom: 2px !important; 
    }

    /* Tab styling */
    .nav-tabs .nav-link.active {
      background-color: #eaf3ec;
      border-color: #d5e1db #d5e1db #eaf3ec;
      color: #2f5d50;
      font-weight: 600;
    }

  </style>
</head>

<body>

  <!-- Header -->
  <header class="py-5 text-center bg-light-green shadow-sm">
    <div class="container">
      <h1 class="display-5 fw-bold text-forest">Bike Accident Hotspots and Trends</h1>
      <p class="lead text-secondary mt-3">
        Exploring Montrealâ€™s cycling safety through open data and spatial visualization.
      </p>
    </div>
  </header>

  <!-- =========================== -->
  <!--        TABS (MAP/ABOUT)     -->
  <!-- =========================== -->
  <div class="container mt-4">

    <ul class="nav nav-tabs" id="mainTabs" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="map-tab" data-bs-toggle="tab" data-bs-target="#mapPanel" type="button" role="tab">Map</button>
      </li>

      <li class="nav-item" role="presentation">
        <button class="nav-link" id="about-tab" data-bs-toggle="tab" data-bs-target="#aboutPanel" type="button" role="tab">About</button>
      </li>
    </ul>

<div class="tab-content">

  <!-- MAP TAB -->
  <div class="tab-pane fade show active" id="mapPanel" role="tabpanel">
    <main class="my-4">
      <div id="map" class="rounded-4 shadow-sm"></div>
      <!-- Compute button below the map -->
      <div class="info-card p-3 rounded-4 shadow-sm bg-white mt-3 d-inline-block">
        <button id="computeBtn" class="btn btn-success btn-sm">Compute</button>
        <div id="resultText"></div>
      </div>
    </main>
  </div> <!-- End of mapPanel -->

  <!-- ABOUT TAB -->
  <div class="tab-pane fade" id="aboutPanel" role="tabpanel">
    <section class="my-4">
      <div class="info-card p-4 rounded-4 shadow-sm bg-white">
        <h2 class="h5 text-forest mb-3">About this project</h2>
        <p>
          This map visualizes reported bike accidents and cycling infrastructure in Montreal. It analyses open data from the City of Montreal. Each point represents a collision event, with colour-coding based on selected variables. 
          Using this map, users are able to compute and visualize different contributing factors and themes in bike accidents. This project presents an early prototype for what could be a more expansive and in-depth look into cyclist safety 
          in dense urban environments. Increasing the amount of variables, a larger dataset of accidents for processing, and the integration of street-specific usage analysis and weighting, could produce interesting results for better understanding 
          of and adapting to cyclist hazards.
        </p>
      </div>
    </section>
  </div>

</div>

  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>

  <script src="app_updated.js"></script>

</body>
</html>
